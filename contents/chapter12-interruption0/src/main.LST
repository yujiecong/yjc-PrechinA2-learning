C51 COMPILER V9.01   MAIN                                                                  04/08/2019 15:30:06 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /****************************************************************
   2          **********************
   3          实验现象：下载程序后，操作 K3 按键使 D1 状态取反
   4          接线说明： (具体接线图可见开发攻略对应实验的“实验现象”章节)
   5          1，单片机-->LED&交通灯模块
   6          P20-->D1
   7          2，单片机-->独立按键模块
   8          P32-->K3
   9          注意事项：
  10          *****************************************************************
  11          **********************/
  12          #include "reg52.h" //此文件中定义了单片机的一些特殊功能寄存器
  13          typedef unsigned int u16; //对数据类型进行声明定义
  14          typedef unsigned char u8;
  15          sbit k3=P3^2; //定义按键 K3
  16          sbit led=P2^0; //定义 P20 口是 led
  17          /****************************************************************
  18          ***************
  19          * 函 数 名 : delay
  20          * 函数功能 : 延时函数，i=1 时，大约延时 10us
  21          *****************************************************************
  22          **************/
  23          void delay(u16 i)
  24          {
  25   1      while(i--);
  26   1      }
  27          /****************************************************************
  28          ***************
  29          * 函 数 名 : Int1Init()
  30          * 函数功能 : 设置外部中断 1
  31          * 输 入 : 无
  32          * 输 出 : 无
  33          *****************************************************************
  34          **************/
  35          void Int0Init()
  36          {
  37   1      //设置 INT0
  38   1      IT0=1;//跳变沿出发方式（下降沿）
  39   1      EX0=1;//打开 INT0 的中断允许。
  40   1      EA=1;//打开总中断
  41   1      }
  42          /****************************************************************
  43          ***************
  44          * 函 数 名 : main
  45          * 函数功能 : 主函数
  46          * 输 入 : 无
  47          * 输 出 : 无
  48          *****************************************************************
  49          **************/
  50          void main()
  51          {
  52   1      Int0Init(); // 设置外部中断 0
  53   1      while(1);
  54   1      }
  55          /****************************************************************
C51 COMPILER V9.01   MAIN                                                                  04/08/2019 15:30:06 PAGE 2   

  56          ***************
  57          * 函 数 名 : Int0() interrupt 0
  58          * 函数功能 : 外部中断 0 的中断函数
  59          * 输 入 : 无
  60          * 输 出 : 无
  61          *****************************************************************
  62          **************/
  63          void Int0() interrupt 0 //外部中断 0 的中断函数
  64          {
  65   1      delay(1000); //延时消抖
  66   1      if(k3==0)
  67   1      {
  68   2      led=~led;
  69   2      }
  70   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     59    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
